from math import gcd

class SignalOptimizer:
    """
    Identifies the maximum number of customer homes on a single 
    straight line-of-sight path for signal repeater placement.
    """
    def max_homes_on_path(self, locations):
        n = len(locations)
        if n <= 2:
            return n
        
        final_max = 0
        
        for i in range(n):
            slopes = {}
            overlapping = 1
            current_anchor_max = 0
            
            x1, y1 = locations[i]
            
            for j in range(i + 1, n):
                x2, y2 = locations[j]
                
                dx = x2 - x1
                dy = y2 - y1
                
                if dx == 0 and dy == 0:
                    overlapping += 1
                    continue
                
                # Normalize the direction vector using GCD
                common = gcd(dx, dy)
                normalized_dx = dx // common
                normalized_dy = dy // common
                
                # Ensure the sign is consistent (e.g., always keep dx positive, 
                # or if dx is 0, keep dy positive) to match same lines.
                if normalized_dx < 0 or (normalized_dx == 0 and normalized_dy < 0):
                    normalized_dx = -normalized_dx
                    normalized_dy = -normalized_dy
                
                slope_key = (normalized_dx, normalized_dy)
                
                slopes[slope_key] = slopes.get(slope_key, 0) + 1
                if slopes[slope_key] > current_anchor_max:
                    current_anchor_max = slopes[slope_key]
            
            # The total points on this line = current slope count + the anchor + overlaps
            final_max = max(final_max, current_anchor_max + overlapping)
            
        return final_max

# --- Validation Script ---
if __name__ == "__main__":
    optimizer = SignalOptimizer()
    test_cases = [
        ([[1,1],[2,2],[3,3]], 3),
        ([[1,1],[3,2],[5,3],[4,1],[2,3],[1,4]], 4), 
        ([[0,0],[0,0],[0,0]], 3),
        ([[1,1]], 1)
    ]
    
    for pts, expected in test_cases:
        result = optimizer.max_homes_on_path(pts)
        status = "PASS" if result == expected else "FAIL"
        print(f"[{status}] Locations: {pts} | Found: {result} | Expected: {expected}")